# ansible-test-connections
Ansible script to validate the connection between servers

#Run example:

ansible-playbook test-conn-master.yml -e "@vars/varfile1.json"

Running example:

PLAY [ansible-master] ********************************************************************************************************************************************************************************************************************************************

TASK [debug] ************************************************************************************************************************************************************************************************************************************************
ok: [ansible-master] => {
    "msg": "START - Testing conn from serverA to serverB using port 9999"
}

TASK [Verify if the port is open on dst host and register variable] *****************************************************************************************************************************************************************************************
changed: [ansible-master]

TASK [Creating template to open sockets on dst servers] *****************************************************************************************************************************************************************************************************
skipping: [ansible-master]

TASK [Open listen ports that is not listening] **************************************************************************************************************************************************************************************************************
skipping: [ansible-master]

TASK [debug] ************************************************************************************************************************************************************************************************************************************************
ok: [ansible-master] => {
    "create_listen_script": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}

TASK [Verify if the port is open on dst host and register variable] *****************************************************************************************************************************************************************************************
changed: [ansible-master -> serverA]

TASK [Kill the python scoket process and the listen port after test] ****************************************************************************************************************************************************************************************
skipping: [vx558]

TASK [Removing socket script file] **************************************************************************************************************************************************************************************************************************
ok: [vx558 -> serverB]

TASK [debug] ************************************************************************************************************************************************************************************************************************************************
ok: [ansible-master] => {
    "msg": "END - SUCCESS - Testing conn from serverA to serverB using port 9999"
}

TASK [fail] *************************************************************************************************************************************************************************************************************************************************
skipping: [ansible-master]

PLAY RECAP **************************************************************************************************************************************************************************************************************************************************
ansible-master                      : ok=6    changed=2    unreachable=0    failed=0


#Run multiple var files:

for files in $(ls -1 vars/*.json); do ansible-playbook test-conn-master.yml -e "@$files" ; done
